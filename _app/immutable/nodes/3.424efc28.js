import{s as J,n as j,h as ce,e as Y,i as Ne,j as Te,o as Me,f as qe,b as ie,r as Ve}from"../chunks/scheduler.21a3a156.js";import{S as K,i as Z,s as y,g as D,c as L,h as k,z as ue,k as _,l as q,a as C,B as G,C as Ae,f as g,j as V,x as T,r as O,m as ee,u as P,n as te,v as R,d as F,t as H,w as W,o as he,y as pe,D as ge,p as ye,b as Le,A as ze}from"../chunks/index.5cde54b0.js";import{p as ne,e as se,n as je}from"../chunks/index.bada3710.js";import{e as re,j as Qe,w as _e,k as we}from"../chunks/singletons.75c95cf8.js";import{p as fe}from"../chunks/stores.df503cfe.js";import{d as X,u as Se}from"../chunks/db.0a5d7a2c.js";var A=(s=>(s[s.Draw=0]="Draw",s[s.Correct=1]="Correct",s[s.Question=2]="Question",s[s.None=3]="None",s[s.Select=4]="Select",s))(A||{});const Fe=""+new URL("../assets/eraser.0e084288.png",import.meta.url).href;function ve(s){let e,t="Show Solution";return{c(){e=D("button"),e.textContent=t,this.h()},l(r){e=k(r,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),ue(e)!=="svelte-on8fyx"&&(e.textContent=t),this.h()},h(){_(e,"class","border text-center"),q(e,"position","fixed"),q(e,"left",s[1][0]+"px"),q(e,"top",s[1][1]+"px"),q(e,"width",s[2][0]-s[1][0]+"px"),q(e,"height",s[2][1]-s[1][1]+"px")},m(r,l){C(r,e,l)},p(r,l){l&2&&q(e,"left",r[1][0]+"px"),l&2&&q(e,"top",r[1][1]+"px"),l&6&&q(e,"width",r[2][0]-r[1][0]+"px"),l&6&&q(e,"height",r[2][1]-r[1][1]+"px")},d(r){r&&g(e)}}}function He(s){let e,t,r='<div style="background-color: green">‚úÖ</div>',l,o,i=s[1][1]&&ve(s);return{c(){i&&i.c(),e=y(),t=D("div"),t.innerHTML=r,this.h()},l(a){i&&i.l(a),e=L(a),t=k(a,"DIV",{class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-aiv1v7"&&(t.innerHTML=r),this.h()},h(){_(t,"class","tool"),q(t,"height",s[0]?"100%":"30px")},m(a,n){i&&i.m(a,n),C(a,e,n),C(a,t,n),l||(o=G(t,"pointerdown",Ae(s[8])),l=!0)},p(a,[n]){a[1][1]?i?i.p(a,n):(i=ve(a),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),n&1&&q(t,"height",a[0]?"100%":"30px")},i:j,o:j,d(a){a&&(g(e),g(t)),i&&i.d(a),l=!1,o()}}}function Ue(s,e,t){let r;const l=A.Select;let o=!1,i=!1,a=[],n=[],h,u,f=ce("selection");Y(s,f,d=>t(7,r=d)),window.addEventListener("pointerdown",d=>{o&&(i=!0,t(5,a=t(6,n=[d.x,d.y])))}),window.addEventListener("pointermove",d=>{i&&t(6,n=[d.x,d.y])}),window.addEventListener("pointerup",()=>{i=!1});const c=()=>f.set(o?A.None:l);return s.$$.update=()=>{s.$$.dirty&128&&t(0,o=r===l),s.$$.dirty&96&&(t(1,h=[Math.min(a[0],n[0]),Math.min(a[1],n[1])]),t(2,u=[Math.max(a[0],n[0]),Math.max(a[1],n[1])]))},[o,h,u,l,f,a,n,r,c]}class Be extends K{constructor(e){super(),Z(this,e,Ue,He,J,{})}}const Oe=""+new URL("../assets/marker.c9b3b178.png",import.meta.url).href;function Pe(s){let e,t,r,l,o;return{c(){e=D("div"),t=D("img"),this.h()},l(i){e=k(i,"DIV",{class:!0});var a=V(e);t=k(a,"IMG",{style:!0,src:!0,title:!0,draggable:!0}),a.forEach(g),this.h()},h(){q(t,"filter",s[1]),Ne(t.src,r=Oe)||_(t,"src",r),_(t,"title",s[2]),_(t,"draggable","false"),_(e,"class","tool"),q(e,"height",s[3]?"100%":"30px")},m(i,a){C(i,e,a),T(e,t),l||(o=G(e,"pointerdown",Ae(s[6])),l=!0)},p(i,[a]){a&2&&q(t,"filter",i[1]),a&4&&_(t,"title",i[2]),a&8&&q(e,"height",i[3]?"100%":"30px")},i:j,o:j,d(i){i&&g(e),l=!1,o()}}}function Re(s,e,t){let r,{tool:l}=e,{filter:o=""}=e,{title:i}=e,a=ce("selection");Y(s,a,u=>t(5,r=u));let n=!1;const h=()=>a.set(n?A.None:l);return s.$$set=u=>{"tool"in u&&t(0,l=u.tool),"filter"in u&&t(1,o=u.filter),"title"in u&&t(2,i=u.title)},s.$$.update=()=>{s.$$.dirty&33&&t(3,n=r===l)},[l,o,i,n,a,r,h]}class me extends K{constructor(e){super(),Z(this,e,Re,Pe,J,{tool:0,filter:1,title:2})}}function We(s){let e,t,r,l,o,i,a,n,h,u,f,c,d,v,w=`<img src="${Fe}" title="Eraser" draggable="false" class="svelte-h3rgmi"/>`,M,Q,x;return t=new Be({}),n=new me({props:{tool:A.Draw,filter:"grayscale(1)",title:"Your work"}}),u=new me({props:{tool:A.Correct,filter:"hue-rotate(136deg)",title:"Correct"}}),c=new me({props:{tool:A.Question,title:"Question"}}),{c(){e=D("div"),O(t.$$.fragment),r=y(),l=D("a"),o=ee("üì∑"),a=y(),O(n.$$.fragment),h=y(),O(u.$$.fragment),f=y(),O(c.$$.fragment),d=y(),v=D("div"),v.innerHTML=w,this.h()},l(b){e=k(b,"DIV",{id:!0,class:!0});var I=V(e);P(t.$$.fragment,I),r=L(I),l=k(I,"A",{href:!0});var U=V(l);o=te(U,"üì∑"),U.forEach(g),a=L(I),P(n.$$.fragment,I),h=L(I),P(u.$$.fragment,I),f=L(I),P(c.$$.fragment,I),d=L(I),v=k(I,"DIV",{class:!0,"data-svelte-h":!0}),ue(v)!=="svelte-19p7wft"&&(v.innerHTML=w),I.forEach(g),this.h()},h(){_(l,"href",i=ne.join("/",re,"camera",s[1].params.problemId)),_(v,"class","tool"),q(v,"height",s[0]?"100%":"30px"),_(e,"id","tools"),_(e,"class","svelte-h3rgmi")},m(b,I){C(b,e,I),R(t,e,null),T(e,r),T(e,l),T(l,o),T(e,a),R(n,e,null),T(e,h),R(u,e,null),T(e,f),R(c,e,null),T(e,d),T(e,v),M=!0,Q||(x=G(v,"click",s[3]),Q=!0)},p(b,[I]){(!M||I&2&&i!==(i=ne.join("/",re,"camera",b[1].params.problemId)))&&_(l,"href",i),I&1&&q(v,"height",b[0]?"100%":"30px")},i(b){M||(F(t.$$.fragment,b),F(n.$$.fragment,b),F(u.$$.fragment,b),F(c.$$.fragment,b),M=!0)},o(b){H(t.$$.fragment,b),H(n.$$.fragment,b),H(u.$$.fragment,b),H(c.$$.fragment,b),M=!1},d(b){b&&g(e),W(t),W(n),W(u),W(c),Q=!1,x()}}}function Ye(s,e,t){let r,l;Y(s,fe,n=>t(1,l=n));let{selected:o}=e;Te("selection",o);let i=ce("eraserEnabled");Y(s,i,n=>t(0,r=n));function a(n){i.set(!r)}return s.$$set=n=>{"selected"in n&&t(4,o=n.selected)},[r,l,i,a,o]}class Xe extends K{constructor(e){super(),Z(this,e,Ye,We,J,{selected:4})}}function Ge(s){let e,t,r,l,o,i,a;return{c(){e=D("canvas"),t=y(),r=D("canvas"),l=y(),o=D("canvas"),this.h()},l(n){e=k(n,"CANVAS",{width:!0,height:!0,class:!0}),V(e).forEach(g),t=L(n),r=k(n,"CANVAS",{width:!0,height:!0,class:!0}),V(r).forEach(g),l=L(n),o=k(n,"CANVAS",{width:!0,height:!0,class:!0}),V(o).forEach(g),this.h()},h(){_(e,"width",s[2]),_(e,"height",s[3]),_(e,"class","svelte-1rofrvo"),_(r,"width",s[2]),_(r,"height",s[3]),_(r,"class","svelte-1rofrvo"),_(o,"width",s[2]),_(o,"height",s[3]),_(o,"class","svelte-1rofrvo")},m(n,h){C(n,e,h),s[8](e),C(n,t,h),C(n,r,h),s[9](r),C(n,l,h),C(n,o,h),s[10](o),i||(a=G(o,"pointerdown",s[5]),i=!0)},p(n,[h]){h&4&&_(e,"width",n[2]),h&8&&_(e,"height",n[3]),h&4&&_(r,"width",n[2]),h&8&&_(r,"height",n[3]),h&4&&_(o,"width",n[2]),h&8&&_(o,"height",n[3])},i:j,o:j,d(n){n&&(g(e),g(t),g(r),g(l),g(o)),s[8](null),s[9](null),s[10](null),i=!1,a()}}}function Je(s,e,t){let r,l=j,o=()=>(l(),l=qe(a,m=>t(13,r=m)),a),i;s.$$.on_destroy.push(()=>l());let{selectedTool:a}=e;o();let{problemId:n}=e,{attemptId:h}=e,u=0,f=0,c=!1,d=ce("eraserEnabled");Y(s,d,m=>t(14,i=m));let v,w=[];function M(){typeof window>"u"||(t(2,u=window.innerWidth),t(3,f=window.innerHeight),requestAnimationFrame(async()=>{if(w[0]==null)return;const m=(await X.files.get(n)).attempts[h];w[A.Draw].putImageData(m.work,0,0),w[A.Correct].putImageData(m.error,0,0),w[A.Question].putImageData(m.questions,0,0)}))}const Q=()=>{const m=[0,0,u,f];X.files.update(n,E=>{const B=E.attempts[h];B.date=new Date,B.duration=Math.floor((new Date().getTime()-v)/1e3/60),r==A.Correct&&(E.mistakes=1),r==A.Question&&(E.questions=1),B[["work","error","questions"][r]]=w[r].getImageData(...m)})},x=typeof window>"u"?!1:window.matchMedia("(prefers-color-scheme: dark)").matches,b={[A.Draw]:x?"white":"black",[A.Correct]:"red",[A.Question]:"blue"},I=m=>{if(r>=A.None)return;const E=w[r];c=!0,E.strokeStyle=b[r],E.lineWidth=i?20:1,E.globalCompositeOperation=i?"destination-out":"source-over",E.beginPath(),E.moveTo(m.clientX,m.clientY)},U=()=>{c&&Q(),c=!1},$=m=>{if(c){const E=w[r];E.lineTo(m.clientX,m.clientY),E.stroke()}};Me(()=>{window.addEventListener("resize",M),document.addEventListener("pointermove",$),document.addEventListener("pointerup",U),t(1,w=w.map(m=>m.getContext("2d",{willReadFrequently:!0})))});function S(m){ie[m?"unshift":"push"](()=>{w[A.Draw]=m,t(1,w)})}function p(m){ie[m?"unshift":"push"](()=>{w[A.Correct]=m,t(1,w)})}function N(m){ie[m?"unshift":"push"](()=>{w[A.Question]=m,t(1,w)})}return s.$$set=m=>{"selectedTool"in m&&o(t(0,a=m.selectedTool)),"problemId"in m&&t(6,n=m.problemId),"attemptId"in m&&t(7,h=m.attemptId)},s.$$.update=()=>{if(s.$$.dirty&194){M(),v=new Date().getTime();for(const m of w){const E=m.canvas;m.clearRect(0,0,E.width,E.height)}}},[a,w,u,f,d,I,n,h,S,p,N]}class Ke extends K{constructor(e){super(),Z(this,e,Je,Ge,J,{selectedTool:0,problemId:6,attemptId:7})}}const oe=Qe("goto");function be(s,e,t){const r=s.slice();return r[7]=e[t],r}function Ie(s){let e,t=s[7].name+"",r,l;return{c(){e=D("option"),r=ee(t),this.h()},l(o){e=k(o,"OPTION",{});var i=V(e);r=te(i,t),i.forEach(g),this.h()},h(){e.__value=l=s[7].id,ge(e,e.__value)},m(o,i){C(o,e,i),T(e,r)},p(o,i){i&2&&t!==(t=o[7].name+"")&&he(r,t),i&2&&l!==(l=o[7].id)&&(e.__value=l,ge(e,e.__value))},d(o){o&&g(e)}}}function Ze(s){let e,t=s[0]?new Date().getMonth()===5?"üè≥Ô∏è‚Äçüåà":"üö©":"üè≥Ô∏è",r,l,o,i,a,n="‚û°Ô∏è",h,u,f=se(s[1]??[]),c=[];for(let d=0;d<f.length;d+=1)c[d]=Ie(be(s,f,d));return{c(){e=D("button"),r=ee(t),l=y(),o=D("select");for(let d=0;d<c.length;d+=1)c[d].c();i=y(),a=D("button"),a.textContent=n},l(d){e=k(d,"BUTTON",{});var v=V(e);r=te(v,t),v.forEach(g),l=L(d),o=k(d,"SELECT",{});var w=V(o);for(let M=0;M<c.length;M+=1)c[M].l(w);w.forEach(g),i=L(d),a=k(d,"BUTTON",{"data-svelte-h":!0}),ue(a)!=="svelte-q61pzu"&&(a.textContent=n)},m(d,v){C(d,e,v),T(e,r),C(d,l,v),C(d,o,v);for(let w=0;w<c.length;w+=1)c[w]&&c[w].m(o,null);C(d,i,v),C(d,a,v),h||(u=[G(e,"click",s[3]),G(o,"change",s[2])],h=!0)},p(d,[v]){if(v&1&&t!==(t=d[0]?new Date().getMonth()===5?"üè≥Ô∏è‚Äçüåà":"üö©":"üè≥Ô∏è")&&he(r,t),v&2){f=se(d[1]??[]);let w;for(w=0;w<f.length;w+=1){const M=be(d,f,w);c[w]?c[w].p(M,v):(c[w]=Ie(M),c[w].c(),c[w].m(o,null))}for(;w<c.length;w+=1)c[w].d(1);c.length=f.length}},i:j,o:j,d(d){d&&(g(e),g(l),g(o),g(i),g(a)),pe(c,d),h=!1,Ve(u)}}}function xe(s,e,t){let r,{parentFolder:l}=e,{problemId:o}=e,i=!1;function a(u){const f=u.target.value;oe(f)}function n(){t(0,i=!i),X.files.update(o,{flagged:i})}const h=Se(()=>X.files.where({parent:l}).toArray());return Y(s,h,u=>t(1,r=u)),s.$$set=u=>{"parentFolder"in u&&t(5,l=u.parentFolder),"problemId"in u&&t(6,o=u.problemId)},s.$$.update=()=>{s.$$.dirty&64&&X.files.get(o).then(u=>t(0,i=(u==null?void 0:u.flagged)??!1))},[i,r,a,n,h,l,o]}class $e extends K{constructor(e){super(),Z(this,e,xe,Ze,J,{parentFolder:5,problemId:6})}}function et(s){let e,t,r,l,o=s[0]+1+"",i;return{c(){e=D("div"),t=D("canvas"),l=ee(`
    Attempt `),i=ee(o),this.h()},l(a){e=k(a,"DIV",{class:!0});var n=V(e);t=k(n,"CANVAS",{width:!0,height:!0}),V(t).forEach(g),l=te(n,`
    Attempt `),i=te(n,o),n.forEach(g),this.h()},h(){_(t,"width",s[1]),_(t,"height",r=s[1]-24),_(e,"class","text-center bg-gray-50 rounded-md"),q(e,"width",s[1]+"px")},m(a,n){C(a,e,n),T(e,t),s[4](t),T(e,l),T(e,i)},p(a,[n]){n&2&&_(t,"width",a[1]),n&2&&r!==(r=a[1]-24)&&_(t,"height",r),n&1&&o!==(o=a[0]+1+"")&&he(i,o),n&2&&q(e,"width",a[1]+"px")},i:j,o:j,d(a){a&&g(e),s[4](null)}}}function tt(s,e,t){let{attempt:r}=e,{idx:l}=e,{size:o=100}=e,i;function a(h,u){const f=document.createElement("canvas");f.width=u[0].width,f.height=u[0].height,h.scale(o/f.width,(o-24)/f.height);for(const c of u)f.getContext("2d").putImageData(c,0,0),h.drawImage(f,0,0)}Me(async()=>{const h=i.getContext("2d");a(h,[r.work,r.error,r.questions])});function n(h){ie[h?"unshift":"push"](()=>{i=h,t(2,i)})}return s.$$set=h=>{"attempt"in h&&t(3,r=h.attempt),"idx"in h&&t(0,l=h.idx),"size"in h&&t(1,o=h.size)},[l,o,i,r,n]}class nt extends K{constructor(e){super(),Z(this,e,tt,et,J,{attempt:3,idx:0,size:1})}}function Ce(s,e,t){const r=s.slice();return r[5]=e[t],r[7]=t,r}function De(s){let e,t,r,l,o;t=new nt({props:{attempt:s[5],idx:s[7]}});function i(){return s[4](s[7])}return{c(){e=D("div"),O(t.$$.fragment)},l(a){e=k(a,"DIV",{});var n=V(e);P(t.$$.fragment,n),n.forEach(g)},m(a,n){C(a,e,n),R(t,e,null),r=!0,l||(o=G(e,"click",i),l=!0)},p(a,n){s=a;const h={};n&1&&(h.attempt=s[5]),t.$set(h)},i(a){r||(F(t.$$.fragment,a),r=!0)},o(a){H(t.$$.fragment,a),r=!1},d(a){a&&g(e),W(t),l=!1,o()}}}function st(s){let e,t,r=`<div class="w-[100px] h-[76px] align-middle text-5xl leading-[1.65]">‚ûï</div>
    New Attempt`,l,o,i,a=se(s[0]??[]),n=[];for(let u=0;u<a.length;u+=1)n[u]=De(Ce(s,a,u));const h=u=>H(n[u],1,1,()=>{n[u]=null});return{c(){for(let u=0;u<n.length;u+=1)n[u].c();e=y(),t=D("div"),t.innerHTML=r,this.h()},l(u){for(let f=0;f<n.length;f+=1)n[f].l(u);e=L(u),t=k(u,"DIV",{class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-59ttd9"&&(t.innerHTML=r),this.h()},h(){_(t,"class","text-center bg-gray-50 rounded-md w-[100px]")},m(u,f){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(u,f);C(u,e,f),C(u,t,f),l=!0,o||(i=G(t,"click",s[2]),o=!0)},p(u,[f]){if(f&1){a=se(u[0]??[]);let c;for(c=0;c<a.length;c+=1){const d=Ce(u,a,c);n[c]?(n[c].p(d,f),F(n[c],1)):(n[c]=De(d),n[c].c(),F(n[c],1),n[c].m(e.parentNode,e))}for(ye(),c=a.length;c<n.length;c+=1)h(c);Le()}},i(u){if(!l){for(let f=0;f<a.length;f+=1)F(n[f]);l=!0}},o(u){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)H(n[f]);l=!1},d(u){u&&(g(e),g(t)),pe(n,u),o=!1,i()}}}function rt(s,e,t){let r,{problemId:l}=e;const o=Se(()=>X.files.get(l).then(n=>n.attempts));Y(s,o,n=>t(0,r=n));function i(){X.files.update(l,n=>{oe("?attempt="+n.attempts.push(je()))})}const a=n=>oe("?attempt="+(n+1));return s.$$set=n=>{"problemId"in n&&t(3,l=n.problemId)},[r,o,i,l,a]}class lt extends K{constructor(e){super(),Z(this,e,rt,st,J,{problemId:3})}}function at(s){let e,t,r;return{c(){e=D("canvas"),this.h()},l(l){e=k(l,"CANVAS",{class:!0}),V(e).forEach(g),this.h()},h(){_(e,"class","fixed left-0 top-[2em]")},m(l,o){C(l,e,o),s[3](e),t||(r=G(e,"mousedown",s[1]),t=!0)},p:j,i:j,o:j,d(l){l&&g(e),s[3](null),t=!1,r()}}}function it(s,e,t){let{problemId:r}=e,l,o;function i(n){setTimeout(()=>{o.dragStart(n)})}function a(n){ie[n?"unshift":"push"](()=>{l=n,t(0,l),t(2,r)})}return s.$$set=n=>{"problemId"in n&&t(2,r=n.problemId)},s.$$.update=()=>{s.$$.dirty&5&&X.files.get(r).then(n=>{n!=null&&n.question&&(t(0,l.width=n.question.width,l),t(0,l.height=n.question.height,l),l.getContext("2d").putImageData(n.question,0,0))})},[l,i,r,a]}class ot extends K{constructor(e){super(),Z(this,e,it,at,J,{problemId:2})}}function ke(s,e,t){const r=s.slice();return r[8]=e[t],r}function Ee(s){let e,t=s[8]+"",r;return{c(){e=ee("/"),r=ee(t)},l(l){e=te(l,"/"),r=te(l,t)},m(l,o){C(l,e,o),C(l,r,o)},p(l,o){o&2&&t!==(t=l[8]+"")&&he(r,t)},d(l){l&&(g(e),g(r))}}}function ut(s){let e,t,r,l,o,i,a,n,h,u,f,c,d,v,w,M,Q,x,b,I,U;t=new ot({props:{problemId:s[0]}}),l=new Ke({props:{selectedTool:s[3],problemId:s[0],attemptId:s[2]}});let $=se(s[1].params.path.split("/")),S=[];for(let p=0;p<$.length;p+=1)S[p]=Ee(ke(s,$,p));return v=new $e({props:{problemId:s[0],parentFolder:s[1].params.path.split("/").at(-1)}}),Q=new Xe({props:{selected:s[3]}}),I=new lt({props:{problemId:s[0]}}),{c(){e=y(),O(t.$$.fragment),r=y(),O(l.$$.fragment),o=y(),i=D("div"),a=D("div"),n=D("a"),h=ee("üè†"),f=y();for(let p=0;p<S.length;p+=1)S[p].c();c=y(),d=D("div"),O(v.$$.fragment),w=y(),M=D("div"),O(Q.$$.fragment),x=y(),b=D("div"),O(I.$$.fragment),this.h()},l(p){ze("svelte-pyemm1",document.head).forEach(g),e=L(p),P(t.$$.fragment,p),r=L(p),P(l.$$.fragment,p),o=L(p),i=k(p,"DIV",{id:!0,class:!0});var m=V(i);a=k(m,"DIV",{id:!0,class:!0});var E=V(a);n=k(E,"A",{href:!0});var B=V(n);h=te(B,"üè†"),B.forEach(g),f=L(E);for(let de=0;de<S.length;de+=1)S[de].l(E);E.forEach(g),c=L(m),d=k(m,"DIV",{id:!0,class:!0});var le=V(d);P(v.$$.fragment,le),le.forEach(g),w=L(m),M=k(m,"DIV",{id:!0,class:!0});var z=V(M);P(Q.$$.fragment,z),z.forEach(g),x=L(m),b=k(m,"DIV",{id:!0,class:!0});var ae=V(b);P(I.$$.fragment,ae),ae.forEach(g),m.forEach(g),this.h()},h(){document.title="MathMan Draw",_(n,"href",u=ne.join("/",re,s[1].params.path)),_(a,"id","breadcrumbs"),_(a,"class","svelte-1edzgew"),_(d,"id","question-management"),_(d,"class","text-right svelte-1edzgew"),_(M,"id","tools-container"),_(M,"class","svelte-1edzgew"),_(b,"id","attempts-container"),_(b,"class","flex flex-col p-3 gap-3 svelte-1edzgew"),_(i,"id","grid"),_(i,"class","svelte-1edzgew")},m(p,N){C(p,e,N),R(t,p,N),C(p,r,N),R(l,p,N),C(p,o,N),C(p,i,N),T(i,a),T(a,n),T(n,h),T(a,f);for(let m=0;m<S.length;m+=1)S[m]&&S[m].m(a,null);T(i,c),T(i,d),R(v,d,null),T(i,w),T(i,M),R(Q,M,null),T(i,x),T(i,b),R(I,b,null),U=!0},p(p,[N]){const m={};N&1&&(m.problemId=p[0]),t.$set(m);const E={};if(N&1&&(E.problemId=p[0]),N&4&&(E.attemptId=p[2]),l.$set(E),(!U||N&2&&u!==(u=ne.join("/",re,p[1].params.path)))&&_(n,"href",u),N&2){$=se(p[1].params.path.split("/"));let z;for(z=0;z<$.length;z+=1){const ae=ke(p,$,z);S[z]?S[z].p(ae,N):(S[z]=Ee(ae),S[z].c(),S[z].m(a,null))}for(;z<S.length;z+=1)S[z].d(1);S.length=$.length}const B={};N&1&&(B.problemId=p[0]),N&2&&(B.parentFolder=p[1].params.path.split("/").at(-1)),v.$set(B);const le={};N&1&&(le.problemId=p[0]),I.$set(le)},i(p){U||(F(t.$$.fragment,p),F(l.$$.fragment,p),F(v.$$.fragment,p),F(Q.$$.fragment,p),F(I.$$.fragment,p),U=!0)},o(p){H(t.$$.fragment,p),H(l.$$.fragment,p),H(v.$$.fragment,p),H(Q.$$.fragment,p),H(I.$$.fragment,p),U=!1},d(p){p&&(g(e),g(r),g(o),g(i)),W(t,p),W(l,p),pe(S,p),W(v),W(Q),W(I)}}}function ft(s,e,t){let r,l,o;Y(s,fe,f=>t(1,l=f));const i=_e(A.None),a=_e(!1);Te("eraserEnabled",a);const n=we(fe,f=>Number.parseInt(f.params.problemId));Y(s,n,f=>t(0,r=f));const h=we(fe,f=>Number.parseInt(f.url.searchParams.get("attempt")??"1")-1);Y(s,h,f=>t(2,o=f));function u(f){if(f){const c=f.route.join("/");"/"+l.params.path!==c&&oe(ne.join("/",re,c,l.params.problemId))}else oe(ne.join("/",re,l.params.path))}return s.$$.update=()=>{s.$$.dirty&1&&typeof window<"u"&&X.files.get(r).then(u)},[r,l,o,i,n,h]}class _t extends K{constructor(e){super(),Z(this,e,ft,ut,J,{})}}export{_t as component};
