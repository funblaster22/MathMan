import{s as se,e as Y,i as Je,n as K,f as We,r as Xe,h as Ze}from"../chunks/scheduler.a731e211.js";import{S as ae,i as ie,e as _e,a as L,d as F,p as Ve,b as Ae,t as O,f as v,y as Ce,g as k,m as V,s as S,r as W,h as w,j as y,n as A,c as j,u as G,k as g,z as Pe,l as Ne,x as h,v as H,o as $,w as J,A as de,B as xe,C as Ie}from"../chunks/index.80c1ccc5.js";import{D as et,d as me,u as Ge}from"../chunks/db.073ea4c6.js";import{e as R,p as X,u as tt,o as lt,g as nt}from"../chunks/navigation.aabef7fc.js";import{e as te,w as rt}from"../chunks/singletons.bf1a5a4f.js";import{p as oe}from"../chunks/stores.0d4ecd43.js";function ze(n,e,t){const l=n.slice();l[4]=e[t];const r=X.join(l[2],l[4]);return l[5]=r,l}function Le(n){let e,t=(n[4]||"/")+"",l,r,o,i,s;return i=new He({props:{fileStruct:n[0][n[4]],indentLevel:n[1]+1,fullPath:n[5]}}),{c(){e=k("a"),l=V(t),o=S(),W(i.$$.fragment),this.h()},l(a){e=w(a,"A",{href:!0,class:!0});var _=y(e);l=A(_,t),_.forEach(v),o=j(a),G(i.$$.fragment,a),this.h()},h(){g(e,"href",r=X.join("/",te,n[5])),g(e,"class","w-full block text-left font-bold"),Pe(e,"font-bold",n[5]===(n[3].params.path||".")),Ne(e,"padding-left",n[1]*15+"px")},m(a,_){L(a,e,_),h(e,l),L(a,o,_),H(i,a,_),s=!0},p(a,_){(!s||_&1)&&t!==(t=(a[4]||"/")+"")&&$(l,t),(!s||_&5&&r!==(r=X.join("/",te,a[5])))&&g(e,"href",r),(!s||_&13)&&Pe(e,"font-bold",a[5]===(a[3].params.path||".")),_&2&&Ne(e,"padding-left",a[1]*15+"px");const m={};_&1&&(m.fileStruct=a[0][a[4]]),_&2&&(m.indentLevel=a[1]+1),_&5&&(m.fullPath=a[5]),i.$set(m)},i(a){s||(F(i.$$.fragment,a),s=!0)},o(a){O(i.$$.fragment,a),s=!1},d(a){a&&(v(e),v(o)),J(i,a)}}}function st(n){let e,t,l=R(Object.keys(n[0]??{})),r=[];for(let i=0;i<l.length;i+=1)r[i]=Le(ze(n,l,i));const o=i=>O(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=_e()},l(i){for(let s=0;s<r.length;s+=1)r[s].l(i);e=_e()},m(i,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,s);L(i,e,s),t=!0},p(i,[s]){if(s&15){l=R(Object.keys(i[0]??{}));let a;for(a=0;a<l.length;a+=1){const _=ze(i,l,a);r[a]?(r[a].p(_,s),F(r[a],1)):(r[a]=Le(_),r[a].c(),F(r[a],1),r[a].m(e.parentNode,e))}for(Ve(),a=l.length;a<r.length;a+=1)o(a);Ae()}},i(i){if(!t){for(let s=0;s<l.length;s+=1)F(r[s]);t=!0}},o(i){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)O(r[s]);t=!1},d(i){i&&v(e),Ce(r,i)}}}function at(n,e,t){let l;Y(n,oe,s=>t(3,l=s));let{fileStruct:r}=e,{indentLevel:o=0}=e,{fullPath:i=""}=e;return n.$$set=s=>{"fileStruct"in s&&t(0,r=s.fileStruct),"indentLevel"in s&&t(1,o=s.indentLevel),"fullPath"in s&&t(2,i=s.fullPath)},[r,o,i,l]}class He extends ae{constructor(e){super(),ie(this,e,at,st,se,{fileStruct:0,indentLevel:1,fullPath:2})}}function it(n){let e,t,l,r,o,i,s=Ue(n[4].date)+"",a,_,m,p,u=n[4].duration+"",I,D,C,B,E=n[0].attempts.length+"",f,d,c,b,z,M=n[0].attempts.reduce($e,0)+"",T,Z,P,ge,Be=n[4].mistakeCount+"",ve,pe,U,le=n[2]?"üóëÔ∏è":"üîª",fe,be,x,ee,ne=n[0].flagged?new Date().getMonth()===5?"üè≥Ô∏è‚Äçüåà ":"üö© ":"",ue,re=n[0].name+"",ce,ke,Te;return{c(){e=k("div"),t=k("div"),l=k("a"),r=k("div"),o=k("div"),i=V("-"),a=V(s),_=S(),m=k("div"),p=V("‚è±Ô∏è "),I=V(u),D=S(),C=k("div"),B=V("‚úèÔ∏è "),f=V(E),d=k("div"),c=S(),b=k("div"),z=V("‚ùî "),T=V(M),Z=S(),P=k("div"),ge=V("‚ùå "),ve=V(Be),pe=S(),U=k("button"),fe=V(le),be=S(),x=k("a"),ee=k("div"),ue=V(ne),ce=V(re),this.h()},l(Q){e=w(Q,"DIV",{class:!0});var q=y(e);t=w(q,"DIV",{class:!0});var he=y(t);l=w(he,"A",{href:!0});var Fe=y(l);r=w(Fe,"DIV",{class:!0});var N=y(r);o=w(N,"DIV",{class:!0,title:!0});var we=y(o);i=A(we,"-"),a=A(we,s),we.forEach(v),_=j(N),m=w(N,"DIV",{class:!0,title:!0});var Ee=y(m);p=A(Ee,"‚è±Ô∏è "),I=A(Ee,u),Ee.forEach(v),D=j(N),C=w(N,"DIV",{class:!0,title:!0});var ye=y(C);B=A(ye,"‚úèÔ∏è "),f=A(ye,E),ye.forEach(v),d=w(N,"DIV",{}),y(d).forEach(v),c=j(N),b=w(N,"DIV",{class:!0,title:!0});var De=y(b);z=A(De,"‚ùî "),T=A(De,M),De.forEach(v),Z=j(N),P=w(N,"DIV",{class:!0,title:!0});var Se=y(P);ge=A(Se,"‚ùå "),ve=A(Se,Be),Se.forEach(v),N.forEach(v),Fe.forEach(v),pe=j(he),U=w(he,"BUTTON",{class:!0,title:!0});var qe=y(U);fe=A(qe,le),qe.forEach(v),he.forEach(v),be=j(q),x=w(q,"A",{href:!0});var Oe=y(x);ee=w(Oe,"DIV",{});var je=y(ee);ue=A(je,ne),ce=A(je,re),je.forEach(v),Oe.forEach(v),q.forEach(v),this.h()},h(){g(o,"class","m-auto"),g(o,"title","Time since last attempt ("+Ue(n[4].date,!1)+")"),g(m,"class","m-auto"),g(m,"title","Duration of last attempt ("+n[4].duration+" minutes)"),g(C,"class","m-auto"),g(C,"title","Number of attempts"),g(b,"class","m-auto"),g(b,"title","Number of unresolved questions"),g(P,"class","m-auto"),g(P,"title","Weighted average of incorrect problems"),g(r,"class","w-full aspect-square border m-auto grid grid-cols-2 grid-rows-3"),g(l,"href",n[3]),g(U,"class","attempt-dropdown svelte-wqw3oy"),g(U,"title","Show attempts"),g(t,"class","relative"),g(x,"href",n[3]),g(e,"class","text-center w-[6rem] mr-[11px]")},m(Q,q){L(Q,e,q),h(e,t),h(t,l),h(l,r),h(r,o),h(o,i),h(o,a),h(r,_),h(r,m),h(m,p),h(m,I),h(r,D),h(r,C),h(C,B),h(C,f),h(r,d),h(r,c),h(r,b),h(b,z),h(b,T),h(r,Z),h(r,P),h(P,ge),h(P,ve),h(t,pe),h(t,U),h(U,fe),h(e,be),h(e,x),h(x,ee),h(ee,ue),h(ee,ce),ke||(Te=de(U,"click",function(){Je(n[5].bind(this,n[0].id))&&n[5].bind(this,n[0].id).apply(this,arguments)}),ke=!0)},p(Q,[q]){n=Q,q&1&&E!==(E=n[0].attempts.length+"")&&$(f,E),q&1&&M!==(M=n[0].attempts.reduce($e,0)+"")&&$(T,M),q&4&&le!==(le=n[2]?"üóëÔ∏è":"üîª")&&$(fe,le),q&1&&ne!==(ne=n[0].flagged?new Date().getMonth()===5?"üè≥Ô∏è‚Äçüåà ":"üö© ":"")&&$(ue,ne),q&1&&re!==(re=n[0].name+"")&&$(ce,re)},i:K,o:K,d(Q){Q&&v(e),ke=!1,Te()}}}function Ue(n,e=!0){const t=new Date,l=(t.getTime()-n.getTime())/(1e3*60*60*24);if(l<=10)return Math.floor(l)+(e?"d":" days");const r=l/7;if(r<=16)return Math.floor(r)+(e?"w":" weeks");const i=(t.getFullYear()-n.getFullYear())*12+(t.getMonth()-n.getMonth());return i<12?i+(e?"m":" months"):Math.floor(i/12)+(e?"y":" years")}const $e=(n,e)=>n+=e.questionCount;function ot(n,e,t){let l,r=K,o=()=>(r(),r=We(a,u=>t(2,l=u)),a),i;Y(n,oe,u=>t(6,i=u)),n.$$.on_destroy.push(()=>r());let{file:s}=e,{deleteEnabled:a}=e;o();const _=X.join("/",te,i.params.path,s.id.toString()),m=function(u){return u.attempts.length===0?et.newBlankAttempt():u.attempts.reduce((I,D)=>D.date>I.date?D:I)}(s);function p(u){l&&me.files.delete(u)}return n.$$set=u=>{"file"in u&&t(0,s=u.file),"deleteEnabled"in u&&o(t(1,a=u.deleteEnabled))},[s,a,l,_,m,p]}class ft extends ae{constructor(e){super(),ie(this,e,ot,it,se,{file:0,deleteEnabled:1})}}function ut(n){let e,t,l,r,o,i;return{c(){e=k("a"),t=k("div"),l=V(n[1]),r=S(),o=V(n[2]),this.h()},l(s){e=w(s,"A",{href:!0,class:!0});var a=y(e);t=w(a,"DIV",{class:!0});var _=y(t);l=A(_,n[1]),_.forEach(v),r=j(a),o=A(a,n[2]),a.forEach(v),this.h()},h(){g(t,"class","text-7xl aspect-square perfect-center font-mono"),g(e,"href",i=X.join("/",te,n[3].params.path,n[0])),g(e,"class","text-center w-[6rem]")},m(s,a){L(s,e,a),h(e,t),h(t,l),h(e,r),h(e,o)},p(s,[a]){a&2&&$(l,s[1]),a&4&&$(o,s[2]),a&9&&i!==(i=X.join("/",te,s[3].params.path,s[0]))&&g(e,"href",i)},i:K,o:K,d(s){s&&v(e)}}}function ct(n,e,t){let l;Y(n,oe,s=>t(3,l=s));let{href:r}=e,{emoji:o}=e,{title:i}=e;return n.$$set=s=>{"href"in s&&t(0,r=s.href),"emoji"in s&&t(1,o=s.emoji),"title"in s&&t(2,i=s.title)},[r,o,i,l]}class Me extends ae{constructor(e){super(),ie(this,e,ct,ut,se,{href:0,emoji:1,title:2})}}function ht(n,e,t){const l=n.slice();return l[6]=e[t],l}function Qe(n,e,t){const l=n.slice();return l[9]=e[t],l}function Re(n,e,t){const l=n.slice();return l[12]=e[t],l}function Ye(n){let e,t;return e=new Me({props:{href:n[12],emoji:"üìÅ",title:n[12]}}),{c(){W(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,r){H(e,l,r),t=!0},p(l,r){const o={};r&2&&(o.href=l[12]),r&2&&(o.title=l[12]),e.$set(o)},i(l){t||(F(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Ke(n,e){let t,l,r;return l=new ft({props:{file:e[9],deleteEnabled:e[0]}}),{key:n,first:null,c(){t=_e(),W(l.$$.fragment),this.h()},l(o){t=_e(),G(l.$$.fragment,o),this.h()},h(){this.first=t},m(o,i){L(o,t,i),H(l,o,i),r=!0},p(o,i){e=o;const s={};i&8&&(s.file=e[9]),i&1&&(s.deleteEnabled=e[0]),l.$set(s)},i(o){r||(F(l.$$.fragment,o),r=!0)},o(o){O(l.$$.fragment,o),r=!1},d(o){o&&v(t),J(l,o)}}}function dt(n){let e;return{c(){e=k("div"),this.h()},l(t){e=w(t,"DIV",{class:!0}),y(e).forEach(v),this.h()},h(){g(e,"class","w-[6rem] mr-[11px]")},m(t,l){L(t,e,l)},p:K,d(t){t&&v(e)}}}function _t(n){let e,t,l,r,o,i,s=[],a=new Map,_,m;t=new Me({props:{href:"0?studyMode=Mistakes",emoji:"üíØ",title:"Review Mistakes"}}),r=new Me({props:{href:"0?studyMode=Questions",emoji:"üôã",title:"Review Questions"}});let p=R(Object.keys(n[1])),u=[];for(let f=0;f<p.length;f+=1)u[f]=Ye(Re(n,p,f));const I=f=>O(u[f],1,1,()=>{u[f]=null});let D=R(n[3]??[]);const C=f=>f[9].id;for(let f=0;f<D.length;f+=1){let d=Qe(n,D,f),c=C(d);a.set(c,s[f]=Ke(c,d))}let B=R(Array(10)),E=[];for(let f=0;f<B.length;f+=1)E[f]=dt(ht(n,B,f));return{c(){e=k("div"),W(t.$$.fragment),l=S(),W(r.$$.fragment),o=S();for(let f=0;f<u.length;f+=1)u[f].c();i=S();for(let f=0;f<s.length;f+=1)s[f].c();_=S();for(let f=0;f<E.length;f+=1)E[f].c();this.h()},l(f){e=w(f,"DIV",{class:!0});var d=y(e);G(t.$$.fragment,d),l=j(d),G(r.$$.fragment,d),o=j(d);for(let c=0;c<u.length;c+=1)u[c].l(d);i=j(d);for(let c=0;c<s.length;c+=1)s[c].l(d);_=j(d);for(let c=0;c<E.length;c+=1)E[c].l(d);d.forEach(v),this.h()},h(){g(e,"class","flex flex-wrap justify-evenly gap-3")},m(f,d){L(f,e,d),H(t,e,null),h(e,l),H(r,e,null),h(e,o);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(e,null);h(e,i);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);h(e,_);for(let c=0;c<E.length;c+=1)E[c]&&E[c].m(e,null);m=!0},p(f,[d]){if(d&2){p=R(Object.keys(f[1]));let c;for(c=0;c<p.length;c+=1){const b=Re(f,p,c);u[c]?(u[c].p(b,d),F(u[c],1)):(u[c]=Ye(b),u[c].c(),F(u[c],1),u[c].m(e,i))}for(Ve(),c=p.length;c<u.length;c+=1)I(c);Ae()}d&9&&(D=R(f[3]??[]),Ve(),s=tt(s,d,C,1,f,D,a,e,lt,Ke,_,Qe),Ae())},i(f){if(!m){F(t.$$.fragment,f),F(r.$$.fragment,f);for(let d=0;d<p.length;d+=1)F(u[d]);for(let d=0;d<D.length;d+=1)F(s[d]);m=!0}},o(f){O(t.$$.fragment,f),O(r.$$.fragment,f),u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)O(u[d]);for(let d=0;d<s.length;d+=1)O(s[d]);m=!1},d(f){f&&v(e),J(t),J(r),Ce(u,f);for(let d=0;d<s.length;d+=1)s[d].d();Ce(E,f)}}}function mt(n,e,t){let l,r,o=K,i=()=>(o(),o=We(m,p=>t(3,r=p)),m);Y(n,oe,p=>t(5,l=p)),n.$$.on_destroy.push(()=>o());let{fileStruct:s}=e,{deleteEnabled:a}=e,_={},m;return n.$$set=p=>{"fileStruct"in p&&t(4,s=p.fileStruct),"deleteEnabled"in p&&t(0,a=p.deleteEnabled)},n.$$.update=()=>{if(n.$$.dirty&50){t(1,_=s);for(const p of l.data.path)if(t(1,_=_[p]),_==null){t(1,_={});break}}n.$$.dirty&32&&i(t(2,m=Ge(()=>me.files.where({route:l.params.path}).toArray())))},[a,_,m,r,s,l]}class gt extends ae{constructor(e){super(),ie(this,e,mt,_t,se,{fileStruct:4,deleteEnabled:0})}}function vt(n){let e,t,l,r,o="üÜôüìÅ",i,s,a="üóëÔ∏è file",_,m,p="‚ûï file",u,I,D,C,B,E,f,d,c;return D=new He({props:{fileStruct:n[0]}}),E=new gt({props:{fileStruct:n[0],deleteEnabled:n[3]}}),{c(){e=S(),t=k("div"),l=k("div"),r=k("button"),r.textContent=o,i=S(),s=k("button"),s.textContent=a,_=S(),m=k("button"),m.textContent=p,u=S(),I=k("div"),W(D.$$.fragment),C=S(),B=k("div"),W(E.$$.fragment),this.h()},l(b){xe("svelte-8s10wx",document.head).forEach(v),e=j(b),t=w(b,"DIV",{id:!0,class:!0});var M=y(t);l=w(M,"DIV",{id:!0,class:!0});var T=y(l);r=w(T,"BUTTON",{"data-svelte-h":!0}),Ie(r)!=="svelte-1ntixsq"&&(r.textContent=o),i=j(T),s=w(T,"BUTTON",{"data-svelte-h":!0}),Ie(s)!=="svelte-1e4eght"&&(s.textContent=a),_=j(T),m=w(T,"BUTTON",{"data-svelte-h":!0}),Ie(m)!=="svelte-9lzaak"&&(m.textContent=p),T.forEach(v),u=j(M),I=w(M,"DIV",{id:!0,class:!0});var Z=y(I);G(D.$$.fragment,Z),Z.forEach(v),C=j(M),B=w(M,"DIV",{id:!0,class:!0});var P=y(B);G(E.$$.fragment,P),P.forEach(v),M.forEach(v),this.h()},h(){document.title="MathMan Browse",g(l,"id","ribbon"),g(l,"class","text-right svelte-1huhyzt"),g(I,"id","folders"),g(I,"class","svelte-1huhyzt"),g(B,"id","files"),g(B,"class","svelte-1huhyzt"),g(t,"id","grid"),g(t,"class","svelte-1huhyzt")},m(b,z){L(b,e,z),L(b,t,z),h(t,l),h(l,r),h(l,i),h(l,s),h(l,_),h(l,m),h(t,u),h(t,I),H(D,I,null),h(t,C),h(t,B),H(E,B,null),f=!0,d||(c=[de(r,"click",n[6]),de(s,"click",n[7]),de(m,"click",n[8])],d=!0)},p(b,[z]){const M={};z&1&&(M.fileStruct=b[0]),D.$set(M);const T={};z&1&&(T.fileStruct=b[0]),E.$set(T)},i(b){f||(F(D.$$.fragment,b),F(E.$$.fragment,b),f=!0)},o(b){O(D.$$.fragment,b),O(E.$$.fragment,b),f=!1},d(b){b&&(v(e),v(t)),J(D),J(E),d=!1,Xe(c)}}}async function pt(n){const e={"":{}};for(const t of n){let l=e[""];for(const r of t.split("/"))r in l||(l[r]={}),l=l[r]}return e}function bt(n,e,t){let l,r,o;Y(n,oe,u=>t(1,r=u));let i={};const s=rt(!1);Y(n,s,u=>t(2,o=u));const a=Ge(()=>me.files.orderBy("route").uniqueKeys());Y(n,a,u=>t(5,l=u));const _=()=>nt(X.join("/",te,...r.data.path.slice(0,-1))),m=()=>Ze(s,o=!o,o),p=()=>me.newFile({basePath:r.params.path});return n.$$.update=()=>{n.$$.dirty&32&&pt(l).then(u=>t(0,i=u))},[i,r,o,s,a,l,_,m,p]}class jt extends ae{constructor(e){super(),ie(this,e,bt,vt,se,{})}}export{jt as component};
