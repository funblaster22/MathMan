import{s as F,n as E,e as Q,f as R,o as T}from"../chunks/scheduler.03df403d.js";import{S as z,i as A,e as B,a as $,d as b,p as U,b as W,t as k,f as d,y as X,g as m,m as K,s as y,r as D,h as p,j as g,n as G,c as w,u as V,k as h,l as q,x as _,v as I,o as H,w as P}from"../chunks/index.5bc90a32.js";import{e as S,u as Y,a as Z,d as L,b as x,n as ee}from"../chunks/newBlankAttempt.6980252a.js";import{r as te}from"../chunks/singletons.3a7a8728.js";import{p as le}from"../chunks/stores.4d916908.js";function M(i,l,r){const a=i.slice();return a[3]=l[r],a}function N(i){let l,r=(i[3]||"/")+"",a,n,f,e,s;return e=new J({props:{fileStruct:i[0][i[3]],indentLevel:i[1]+1,fullPath:i[2]+"/"+i[3]}}),{c(){l=m("a"),a=K(r),f=y(),D(e.$$.fragment),this.h()},l(t){l=p(t,"A",{href:!0,class:!0});var o=g(l);a=G(o,r),o.forEach(d),f=w(t),V(e.$$.fragment,t),this.h()},h(){h(l,"href",n=i[2].substring(1)+"/"+i[3]),h(l,"class","w-full block text-left"),q(l,"padding-left",i[1]*15+"px")},m(t,o){$(t,l,o),_(l,a),$(t,f,o),I(e,t,o),s=!0},p(t,o){(!s||o&1)&&r!==(r=(t[3]||"/")+"")&&H(a,r),(!s||o&5&&n!==(n=t[2].substring(1)+"/"+t[3]))&&h(l,"href",n),o&2&&q(l,"padding-left",t[1]*15+"px");const c={};o&1&&(c.fileStruct=t[0][t[3]]),o&2&&(c.indentLevel=t[1]+1),o&5&&(c.fullPath=t[2]+"/"+t[3]),e.$set(c)},i(t){s||(b(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){t&&(d(l),d(f)),P(e,t)}}}function se(i){let l,r,a=S(Object.keys(i[0]??{})),n=[];for(let e=0;e<a.length;e+=1)n[e]=N(M(i,a,e));const f=e=>k(n[e],1,1,()=>{n[e]=null});return{c(){for(let e=0;e<n.length;e+=1)n[e].c();l=B()},l(e){for(let s=0;s<n.length;s+=1)n[s].l(e);l=B()},m(e,s){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,s);$(e,l,s),r=!0},p(e,[s]){if(s&7){a=S(Object.keys(e[0]??{}));let t;for(t=0;t<a.length;t+=1){const o=M(e,a,t);n[t]?(n[t].p(o,s),b(n[t],1)):(n[t]=N(o),n[t].c(),b(n[t],1),n[t].m(l.parentNode,l))}for(U(),t=a.length;t<n.length;t+=1)f(t);W()}},i(e){if(!r){for(let s=0;s<a.length;s+=1)b(n[s]);r=!0}},o(e){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)k(n[s]);r=!1},d(e){e&&d(l),X(n,e)}}}function re(i,l,r){let{fileStruct:a}=l,{indentLevel:n=0}=l,{fullPath:f=""}=l;return i.$$set=e=>{"fileStruct"in e&&r(0,a=e.fileStruct),"indentLevel"in e&&r(1,n=e.indentLevel),"fullPath"in e&&r(2,f=e.fullPath)},[a,n,f]}class J extends z{constructor(l){super(),A(this,l,re,se,F,{fileStruct:0,indentLevel:1,fullPath:2})}}function O(i,l,r){const a=i.slice();return a[3]=l[r],a}function C(i,l){let r,a,n,f,e=l[3].name+"",s,t,o;return{key:i,first:null,c(){r=m("a"),a=m("div"),n=y(),f=m("div"),s=K(e),t=y(),this.h()},l(c){r=p(c,"A",{class:!0,href:!0});var u=g(r);a=p(u,"DIV",{class:!0}),g(a).forEach(d),n=w(u),f=p(u,"DIV",{});var v=g(f);s=G(v,e),v.forEach(d),t=w(u),u.forEach(d),this.h()},h(){h(a,"class","w-12 h-12 bg-red-500 m-auto"),h(r,"class","text-center"),h(r,"href",o=l[3].id),this.first=r},m(c,u){$(c,r,u),_(r,a),_(r,n),_(r,f),_(f,s),_(r,t)},p(c,u){l=c,u&2&&e!==(e=l[3].name+"")&&H(s,e),u&2&&o!==(o=l[3].id)&&h(r,"href",o)},d(c){c&&d(r)}}}function ne(i){let l,r=[],a=new Map,n=S(i[1]);const f=e=>e[3].id;for(let e=0;e<n.length;e+=1){let s=O(i,n,e),t=f(s);a.set(t,r[e]=C(t,s))}return{c(){l=m("div");for(let e=0;e<r.length;e+=1)r[e].c();this.h()},l(e){l=p(e,"DIV",{class:!0});var s=g(l);for(let t=0;t<r.length;t+=1)r[t].l(s);s.forEach(d),this.h()},h(){h(l,"class","flex flex-wrap gap-5")},m(e,s){$(e,l,s);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(l,null)},p(e,[s]){s&2&&(n=S(e[1]),r=Y(r,s,f,1,e,n,a,l,x,C,null,O))},i:E,o:E,d(e){e&&d(l);for(let s=0;s<r.length;s+=1)r[s].d()}}}function ae(i,l,r){let a,n,f=E,e=()=>(f(),f=R(s,t=>r(1,n=t)),s);Q(i,le,t=>r(2,a=t)),i.$$.on_destroy.push(()=>f());let s=te([]);return e(),i.$$.update=()=>{i.$$.dirty&4&&e(r(0,s=Z(()=>L.files.where({"[route]":[["",...a.params.path.split("/")]]}).toArray())))},[s,n,a]}class ie extends z{constructor(l){super(),A(this,l,ae,ne,F,{})}}function fe(i){let l,r,a,n,f,e,s,t,o;return f=new J({props:{fileStruct:i[0]}}),t=new ie({}),{c(){l=m("div"),r=m("div"),a=y(),n=m("div"),D(f.$$.fragment),e=y(),s=m("div"),D(t.$$.fragment),this.h()},l(c){l=p(c,"DIV",{id:!0,class:!0});var u=g(l);r=p(u,"DIV",{id:!0,class:!0}),g(r).forEach(d),a=w(u),n=p(u,"DIV",{id:!0,class:!0});var v=g(n);V(f.$$.fragment,v),v.forEach(d),e=w(u),s=p(u,"DIV",{id:!0,class:!0});var j=g(s);V(t.$$.fragment,j),j.forEach(d),u.forEach(d),this.h()},h(){h(r,"id","ribbon"),h(r,"class","svelte-1huhyzt"),h(n,"id","folders"),h(n,"class","svelte-1huhyzt"),h(s,"id","files"),h(s,"class","svelte-1huhyzt"),h(l,"id","grid"),h(l,"class","svelte-1huhyzt")},m(c,u){$(c,l,u),_(l,r),_(l,a),_(l,n),I(f,n,null),_(l,e),_(l,s),I(t,s,null),o=!0},p(c,[u]){const v={};u&1&&(v.fileStruct=c[0]),f.$set(v)},i(c){o||(b(f.$$.fragment,c),b(t.$$.fragment,c),o=!0)},o(c){k(f.$$.fragment,c),k(t.$$.fragment,c),o=!1},d(c){c&&d(l),P(f),P(t)}}}function oe(i,l,r){let a={};async function n(){const e={},s=await L.files.orderBy("[route]").uniqueKeys().then(t=>t.flat(1));for(const t of s){let o=e;for(const c of t)c in o||(o[c]={}),o=o[c]}return e}function f(...e){if(e.length<1){console.error("Need at least filename");return}L.files.add({attempts:[ee()],parent:e.at(-2)??"",route:["",...e.slice(0,e.length-1)],name:e.at(-1)})}return T(()=>{window.newFile=f,n().then(e=>r(0,a=e))}),[a]}class me extends z{constructor(l){super(),A(this,l,oe,fe,F,{})}}export{me as component};
