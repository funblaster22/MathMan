import{s as j,n as D,e as O,o as B,p as C,b as y}from"../chunks/scheduler.a731e211.js";import{S as T,i as q,g as p,s as E,h as v,j as b,f as n,c as k,k as g,a as w,x as I,A}from"../chunks/index.80c1ccc5.js";import{d as M}from"../chunks/db.073ea4c6.js";import{p as N}from"../chunks/stores.0d4ecd43.js";function P(l){let r,o,u,e,a,f,c,d,t,m;return{c(){r=p("div"),o=p("video"),u=E(),e=p("div"),a=p("div"),f=E(),c=p("div"),d=p("button"),this.h()},l(s){r=v(s,"DIV",{class:!0});var i=b(r);o=v(i,"VIDEO",{class:!0}),b(o).forEach(n),i.forEach(n),u=k(s),e=v(s,"DIV",{class:!0});var _=b(e);a=v(_,"DIV",{class:!0}),b(a).forEach(n),_.forEach(n),f=k(s),c=v(s,"DIV",{class:!0});var h=b(c);d=v(h,"BUTTON",{class:!0}),b(d).forEach(n),h.forEach(n),this.h()},h(){g(o,"class","w-full"),g(r,"class","fixed inset-x-0 inset-y-0"),g(a,"class","resize overflow-auto border min-w-12 min-h-12"),g(e,"class","fixed w-full h-[60vh] inset-x-0 top-0 flex items-center justify-center"),g(d,"class","rounded-full bg-red-500 m-auto block w-12 h-12"),g(c,"class","fixed inset-x-0 bottom-12")},m(s,i){w(s,r,i),I(r,o),l[3](o),w(s,u,i),w(s,e,i),I(e,a),l[4](a),w(s,f,i),w(s,c,i),I(c,d),t||(m=A(d,"click",l[2]),t=!0)},p:D,i:D,o:D,d(s){s&&(n(r),n(u),n(e),n(f),n(c)),l[3](null),l[4](null),t=!1,m()}}}function S(l,r,o){let u;O(l,N,t=>o(5,u=t));let e,a;B(()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(t=>{o(0,e.srcObject=t,e),e.play()}).catch(t=>{console.error(`An error occurred: ${t}`)})}),C(()=>{e.srcObject.getVideoTracks()[0].stop()});function f(t){const[m,s]=[e.videoWidth,e.videoHeight],i=document.createElement("canvas");i.width=m,i.height=s;const _=i.getContext("2d");_.drawImage(e,0,0,m,s);const h=a.getBoundingClientRect(),x=m/window.innerWidth,V=_.getImageData(h.x*x,h.y*x,h.width*x,h.height*x);M.files.update(Number.parseInt(u.params.problemId),{question:V}).then(()=>history.back())}function c(t){y[t?"unshift":"push"](()=>{e=t,o(0,e)})}function d(t){y[t?"unshift":"push"](()=>{a=t,o(1,a)})}return[e,a,f,c,d]}class H extends T{constructor(r){super(),q(this,r,S,P,j,{})}}export{H as component};
