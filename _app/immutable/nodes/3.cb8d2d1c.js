import{s as J,n as j,j as ce,e as Y,k as Ne,l as Te,o as Me,f as ye,b as oe,r as qe}from"../chunks/scheduler.00dc3453.js";import{S as K,i as Z,s as V,g as C,c as L,h as D,A as ue,k as _,l as y,a as k,z as G,C as Se,f as g,j as q,x as T,r as P,m as ee,u as B,n as te,v as R,d as F,t as H,w as W,o as de,y as pe,D as ge,p as Ve,b as Le,B as ze}from"../chunks/index.2d86d01a.js";import{p as ne,e as re,n as je}from"../chunks/index.4b0e875b.js";import{e as se,j as Qe,w as _e,k as we}from"../chunks/singletons.9bffde4e.js";import{p as fe}from"../chunks/stores.0b351ade.js";import{d as X,u as Ae}from"../chunks/db.0a5d7a2c.js";const Fe=({params:n})=>({problemId:Number.parseInt(n.problemId)}),wt=Object.freeze(Object.defineProperty({__proto__:null,load:Fe},Symbol.toStringTag,{value:"Module"}));var S=(n=>(n[n.Draw=0]="Draw",n[n.Correct=1]="Correct",n[n.Question=2]="Question",n[n.None=3]="None",n[n.Select=4]="Select",n))(S||{});const He=""+new URL("../assets/eraser.0e084288.png",import.meta.url).href;function ve(n){let e,t="Show Solution";return{c(){e=C("button"),e.textContent=t,this.h()},l(s){e=D(s,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),ue(e)!=="svelte-on8fyx"&&(e.textContent=t),this.h()},h(){_(e,"class","border text-center"),y(e,"position","fixed"),y(e,"left",n[1][0]+"px"),y(e,"top",n[1][1]+"px"),y(e,"width",n[2][0]-n[1][0]+"px"),y(e,"height",n[2][1]-n[1][1]+"px")},m(s,l){k(s,e,l)},p(s,l){l&2&&y(e,"left",s[1][0]+"px"),l&2&&y(e,"top",s[1][1]+"px"),l&6&&y(e,"width",s[2][0]-s[1][0]+"px"),l&6&&y(e,"height",s[2][1]-s[1][1]+"px")},d(s){s&&g(e)}}}function Oe(n){let e,t,s='<div style="background-color: green">‚úÖ</div>',l,i,o=n[1][1]&&ve(n);return{c(){o&&o.c(),e=V(),t=C("div"),t.innerHTML=s,this.h()},l(a){o&&o.l(a),e=L(a),t=D(a,"DIV",{class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-aiv1v7"&&(t.innerHTML=s),this.h()},h(){_(t,"class","tool"),y(t,"height",n[0]?"100%":"30px")},m(a,r){o&&o.m(a,r),k(a,e,r),k(a,t,r),l||(i=G(t,"pointerdown",Se(n[8])),l=!0)},p(a,[r]){a[1][1]?o?o.p(a,r):(o=ve(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),r&1&&y(t,"height",a[0]?"100%":"30px")},i:j,o:j,d(a){a&&(g(e),g(t)),o&&o.d(a),l=!1,i()}}}function Ue(n,e,t){let s;const l=S.Select;let i=!1,o=!1,a=[],r=[],d,u,f=ce("selection");Y(n,f,m=>t(7,s=m)),window.addEventListener("pointerdown",m=>{i&&(o=!0,t(5,a=t(6,r=[m.x,m.y])))}),window.addEventListener("pointermove",m=>{o&&t(6,r=[m.x,m.y])}),window.addEventListener("pointerup",()=>{o=!1});const c=()=>f.set(i?S.None:l);return n.$$.update=()=>{n.$$.dirty&128&&t(0,i=s===l),n.$$.dirty&96&&(t(1,d=[Math.min(a[0],r[0]),Math.min(a[1],r[1])]),t(2,u=[Math.max(a[0],r[0]),Math.max(a[1],r[1])]))},[i,d,u,l,f,a,r,s,c]}class Pe extends K{constructor(e){super(),Z(this,e,Ue,Oe,J,{})}}const Be=""+new URL("../assets/marker.c9b3b178.png",import.meta.url).href;function Re(n){let e,t,s,l,i;return{c(){e=C("div"),t=C("img"),this.h()},l(o){e=D(o,"DIV",{class:!0});var a=q(e);t=D(a,"IMG",{style:!0,src:!0,title:!0,draggable:!0}),a.forEach(g),this.h()},h(){y(t,"filter",n[1]),Ne(t.src,s=Be)||_(t,"src",s),_(t,"title",n[2]),_(t,"draggable","false"),_(e,"class","tool"),y(e,"height",n[3]?"100%":"30px")},m(o,a){k(o,e,a),T(e,t),l||(i=G(e,"pointerdown",Se(n[6])),l=!0)},p(o,[a]){a&2&&y(t,"filter",o[1]),a&4&&_(t,"title",o[2]),a&8&&y(e,"height",o[3]?"100%":"30px")},i:j,o:j,d(o){o&&g(e),l=!1,i()}}}function We(n,e,t){let s,{tool:l}=e,{filter:i=""}=e,{title:o}=e,a=ce("selection");Y(n,a,u=>t(5,s=u));let r=!1;const d=()=>a.set(r?S.None:l);return n.$$set=u=>{"tool"in u&&t(0,l=u.tool),"filter"in u&&t(1,i=u.filter),"title"in u&&t(2,o=u.title)},n.$$.update=()=>{n.$$.dirty&33&&t(3,r=s===l)},[l,i,o,r,a,s,d]}class he extends K{constructor(e){super(),Z(this,e,We,Re,J,{tool:0,filter:1,title:2})}}function Ye(n){let e,t,s,l,i,o,a,r,d,u,f,c,m,v,w=`<img src="${He}" title="Eraser" draggable="false" class="svelte-h3rgmi"/>`,M,Q,x;return t=new Pe({}),r=new he({props:{tool:S.Draw,filter:"grayscale(1)",title:"Your work"}}),u=new he({props:{tool:S.Correct,filter:"hue-rotate(136deg)",title:"Correct"}}),c=new he({props:{tool:S.Question,title:"Question"}}),{c(){e=C("div"),P(t.$$.fragment),s=V(),l=C("a"),i=ee("üì∑"),a=V(),P(r.$$.fragment),d=V(),P(u.$$.fragment),f=V(),P(c.$$.fragment),m=V(),v=C("div"),v.innerHTML=w,this.h()},l(b){e=D(b,"DIV",{id:!0,class:!0});var I=q(e);B(t.$$.fragment,I),s=L(I),l=D(I,"A",{href:!0});var O=q(l);i=te(O,"üì∑"),O.forEach(g),a=L(I),B(r.$$.fragment,I),d=L(I),B(u.$$.fragment,I),f=L(I),B(c.$$.fragment,I),m=L(I),v=D(I,"DIV",{class:!0,"data-svelte-h":!0}),ue(v)!=="svelte-19p7wft"&&(v.innerHTML=w),I.forEach(g),this.h()},h(){_(l,"href",o=ne.join("/",se,"camera",n[1].params.problemId)),_(v,"class","tool"),y(v,"height",n[0]?"100%":"30px"),_(e,"id","tools"),_(e,"class","svelte-h3rgmi")},m(b,I){k(b,e,I),R(t,e,null),T(e,s),T(e,l),T(l,i),T(e,a),R(r,e,null),T(e,d),R(u,e,null),T(e,f),R(c,e,null),T(e,m),T(e,v),M=!0,Q||(x=G(v,"click",n[3]),Q=!0)},p(b,[I]){(!M||I&2&&o!==(o=ne.join("/",se,"camera",b[1].params.problemId)))&&_(l,"href",o),I&1&&y(v,"height",b[0]?"100%":"30px")},i(b){M||(F(t.$$.fragment,b),F(r.$$.fragment,b),F(u.$$.fragment,b),F(c.$$.fragment,b),M=!0)},o(b){H(t.$$.fragment,b),H(r.$$.fragment,b),H(u.$$.fragment,b),H(c.$$.fragment,b),M=!1},d(b){b&&g(e),W(t),W(r),W(u),W(c),Q=!1,x()}}}function Xe(n,e,t){let s,l;Y(n,fe,r=>t(1,l=r));let{selected:i}=e;Te("selection",i);let o=ce("eraserEnabled");Y(n,o,r=>t(0,s=r));function a(r){o.set(!s)}return n.$$set=r=>{"selected"in r&&t(4,i=r.selected)},[s,l,o,a,i]}class Ge extends K{constructor(e){super(),Z(this,e,Xe,Ye,J,{selected:4})}}function Je(n){let e,t,s,l,i,o,a;return{c(){e=C("canvas"),t=V(),s=C("canvas"),l=V(),i=C("canvas"),this.h()},l(r){e=D(r,"CANVAS",{width:!0,height:!0,class:!0}),q(e).forEach(g),t=L(r),s=D(r,"CANVAS",{width:!0,height:!0,class:!0}),q(s).forEach(g),l=L(r),i=D(r,"CANVAS",{width:!0,height:!0,class:!0}),q(i).forEach(g),this.h()},h(){_(e,"width",n[2]),_(e,"height",n[3]),_(e,"class","svelte-1rofrvo"),_(s,"width",n[2]),_(s,"height",n[3]),_(s,"class","svelte-1rofrvo"),_(i,"width",n[2]),_(i,"height",n[3]),_(i,"class","svelte-1rofrvo")},m(r,d){k(r,e,d),n[8](e),k(r,t,d),k(r,s,d),n[9](s),k(r,l,d),k(r,i,d),n[10](i),o||(a=G(i,"pointerdown",n[5]),o=!0)},p(r,[d]){d&4&&_(e,"width",r[2]),d&8&&_(e,"height",r[3]),d&4&&_(s,"width",r[2]),d&8&&_(s,"height",r[3]),d&4&&_(i,"width",r[2]),d&8&&_(i,"height",r[3])},i:j,o:j,d(r){r&&(g(e),g(t),g(s),g(l),g(i)),n[8](null),n[9](null),n[10](null),o=!1,a()}}}function Ke(n,e,t){let s,l=j,i=()=>(l(),l=ye(a,h=>t(13,s=h)),a),o;n.$$.on_destroy.push(()=>l());let{selectedTool:a}=e;i();let{problemId:r}=e,{attemptId:d}=e,u=0,f=0,c=!1,m=ce("eraserEnabled");Y(n,m,h=>t(14,o=h));let v,w=[];function M(){typeof window>"u"||(t(2,u=window.innerWidth),t(3,f=window.innerHeight),requestAnimationFrame(async()=>{if(w[0]==null)return;const h=(await X.files.get(r)).attempts[d];w[S.Draw].putImageData(h.work,0,0),w[S.Correct].putImageData(h.error,0,0),w[S.Question].putImageData(h.questions,0,0)}))}const Q=()=>{const h=[0,0,u,f];X.files.update(r,E=>{const U=E.attempts[d];U.date=new Date,U.duration=Math.floor((new Date().getTime()-v)/1e3/60),s==S.Correct&&(E.mistakes=1),s==S.Question&&(E.questions=1),U[["work","error","questions"][s]]=w[s].getImageData(...h)})},x=typeof window>"u"?!1:window.matchMedia("(prefers-color-scheme: dark)").matches,b={[S.Draw]:x?"white":"black",[S.Correct]:"red",[S.Question]:"blue"},I=h=>{if(s>=S.None)return;const E=w[s];c=!0,E.strokeStyle=b[s],E.lineWidth=o?20:1,E.globalCompositeOperation=o?"destination-out":"source-over",E.beginPath(),E.moveTo(h.clientX,h.clientY)},O=()=>{c&&Q(),c=!1},$=h=>{if(c){const E=w[s];E.lineTo(h.clientX,h.clientY),E.stroke()}};Me(()=>{window.addEventListener("resize",M),document.addEventListener("pointermove",$),document.addEventListener("pointerup",O),t(1,w=w.map(h=>h.getContext("2d",{willReadFrequently:!0})))});function A(h){oe[h?"unshift":"push"](()=>{w[S.Draw]=h,t(1,w)})}function p(h){oe[h?"unshift":"push"](()=>{w[S.Correct]=h,t(1,w)})}function N(h){oe[h?"unshift":"push"](()=>{w[S.Question]=h,t(1,w)})}return n.$$set=h=>{"selectedTool"in h&&i(t(0,a=h.selectedTool)),"problemId"in h&&t(6,r=h.problemId),"attemptId"in h&&t(7,d=h.attemptId)},n.$$.update=()=>{if(n.$$.dirty&194){M(),v=new Date().getTime();for(const h of w){const E=h.canvas;h.clearRect(0,0,E.width,E.height)}}},[a,w,u,f,m,I,r,d,A,p,N]}class Ze extends K{constructor(e){super(),Z(this,e,Ke,Je,J,{selectedTool:0,problemId:6,attemptId:7})}}const ie=Qe("goto");function be(n,e,t){const s=n.slice();return s[7]=e[t],s}function Ie(n){let e,t=n[7].name+"",s,l;return{c(){e=C("option"),s=ee(t),this.h()},l(i){e=D(i,"OPTION",{});var o=q(e);s=te(o,t),o.forEach(g),this.h()},h(){e.__value=l=n[7].id,ge(e,e.__value)},m(i,o){k(i,e,o),T(e,s)},p(i,o){o&2&&t!==(t=i[7].name+"")&&de(s,t),o&2&&l!==(l=i[7].id)&&(e.__value=l,ge(e,e.__value))},d(i){i&&g(e)}}}function xe(n){let e,t=n[0]?new Date().getMonth()===5?"üè≥Ô∏è‚Äçüåà":"üö©":"üè≥Ô∏è",s,l,i,o,a,r="‚û°Ô∏è",d,u,f=re(n[1]??[]),c=[];for(let m=0;m<f.length;m+=1)c[m]=Ie(be(n,f,m));return{c(){e=C("button"),s=ee(t),l=V(),i=C("select");for(let m=0;m<c.length;m+=1)c[m].c();o=V(),a=C("button"),a.textContent=r},l(m){e=D(m,"BUTTON",{});var v=q(e);s=te(v,t),v.forEach(g),l=L(m),i=D(m,"SELECT",{});var w=q(i);for(let M=0;M<c.length;M+=1)c[M].l(w);w.forEach(g),o=L(m),a=D(m,"BUTTON",{"data-svelte-h":!0}),ue(a)!=="svelte-q61pzu"&&(a.textContent=r)},m(m,v){k(m,e,v),T(e,s),k(m,l,v),k(m,i,v);for(let w=0;w<c.length;w+=1)c[w]&&c[w].m(i,null);k(m,o,v),k(m,a,v),d||(u=[G(e,"click",n[3]),G(i,"change",n[2])],d=!0)},p(m,[v]){if(v&1&&t!==(t=m[0]?new Date().getMonth()===5?"üè≥Ô∏è‚Äçüåà":"üö©":"üè≥Ô∏è")&&de(s,t),v&2){f=re(m[1]??[]);let w;for(w=0;w<f.length;w+=1){const M=be(m,f,w);c[w]?c[w].p(M,v):(c[w]=Ie(M),c[w].c(),c[w].m(i,null))}for(;w<c.length;w+=1)c[w].d(1);c.length=f.length}},i:j,o:j,d(m){m&&(g(e),g(l),g(i),g(o),g(a)),pe(c,m),d=!1,qe(u)}}}function $e(n,e,t){let s,{parentFolder:l}=e,{problemId:i}=e,o=!1;function a(u){const f=u.target.value;ie(f)}function r(){t(0,o=!o),X.files.update(i,{flagged:o})}const d=Ae(()=>X.files.where({parent:l}).toArray());return Y(n,d,u=>t(1,s=u)),n.$$set=u=>{"parentFolder"in u&&t(5,l=u.parentFolder),"problemId"in u&&t(6,i=u.problemId)},n.$$.update=()=>{n.$$.dirty&64&&X.files.get(i).then(u=>t(0,o=(u==null?void 0:u.flagged)??!1))},[o,s,a,r,d,l,i]}class et extends K{constructor(e){super(),Z(this,e,$e,xe,J,{parentFolder:5,problemId:6})}}function tt(n){let e,t,s,l,i=n[0]+1+"",o;return{c(){e=C("div"),t=C("canvas"),l=ee(`
    Attempt `),o=ee(i),this.h()},l(a){e=D(a,"DIV",{class:!0});var r=q(e);t=D(r,"CANVAS",{width:!0,height:!0}),q(t).forEach(g),l=te(r,`
    Attempt `),o=te(r,i),r.forEach(g),this.h()},h(){_(t,"width",n[1]),_(t,"height",s=n[1]-24),_(e,"class","text-center bg-gray-50 rounded-md"),y(e,"width",n[1]+"px")},m(a,r){k(a,e,r),T(e,t),n[4](t),T(e,l),T(e,o)},p(a,[r]){r&2&&_(t,"width",a[1]),r&2&&s!==(s=a[1]-24)&&_(t,"height",s),r&1&&i!==(i=a[0]+1+"")&&de(o,i),r&2&&y(e,"width",a[1]+"px")},i:j,o:j,d(a){a&&g(e),n[4](null)}}}function nt(n,e,t){let{attempt:s}=e,{idx:l}=e,{size:i=100}=e,o;function a(d,u){const f=document.createElement("canvas");f.width=u[0].width,f.height=u[0].height,d.scale(i/f.width,(i-24)/f.height);for(const c of u)f.getContext("2d").putImageData(c,0,0),d.drawImage(f,0,0)}Me(async()=>{const d=o.getContext("2d");a(d,[s.work,s.error,s.questions])});function r(d){oe[d?"unshift":"push"](()=>{o=d,t(2,o)})}return n.$$set=d=>{"attempt"in d&&t(3,s=d.attempt),"idx"in d&&t(0,l=d.idx),"size"in d&&t(1,i=d.size)},[l,i,o,s,r]}class rt extends K{constructor(e){super(),Z(this,e,nt,tt,J,{attempt:3,idx:0,size:1})}}function ke(n,e,t){const s=n.slice();return s[5]=e[t],s[7]=t,s}function Ce(n){let e,t,s,l,i;t=new rt({props:{attempt:n[5],idx:n[7]}});function o(){return n[4](n[7])}return{c(){e=C("div"),P(t.$$.fragment)},l(a){e=D(a,"DIV",{});var r=q(e);B(t.$$.fragment,r),r.forEach(g)},m(a,r){k(a,e,r),R(t,e,null),s=!0,l||(i=G(e,"click",o),l=!0)},p(a,r){n=a;const d={};r&1&&(d.attempt=n[5]),t.$set(d)},i(a){s||(F(t.$$.fragment,a),s=!0)},o(a){H(t.$$.fragment,a),s=!1},d(a){a&&g(e),W(t),l=!1,i()}}}function st(n){let e,t,s=`<div class="w-[100px] h-[76px] align-middle text-5xl leading-[1.65]">‚ûï</div>
    New Attempt`,l,i,o,a=re(n[0]??[]),r=[];for(let u=0;u<a.length;u+=1)r[u]=Ce(ke(n,a,u));const d=u=>H(r[u],1,1,()=>{r[u]=null});return{c(){for(let u=0;u<r.length;u+=1)r[u].c();e=V(),t=C("div"),t.innerHTML=s,this.h()},l(u){for(let f=0;f<r.length;f+=1)r[f].l(u);e=L(u),t=D(u,"DIV",{class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-59ttd9"&&(t.innerHTML=s),this.h()},h(){_(t,"class","text-center bg-gray-50 rounded-md w-[100px]")},m(u,f){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(u,f);k(u,e,f),k(u,t,f),l=!0,i||(o=G(t,"click",n[2]),i=!0)},p(u,[f]){if(f&1){a=re(u[0]??[]);let c;for(c=0;c<a.length;c+=1){const m=ke(u,a,c);r[c]?(r[c].p(m,f),F(r[c],1)):(r[c]=Ce(m),r[c].c(),F(r[c],1),r[c].m(e.parentNode,e))}for(Ve(),c=a.length;c<r.length;c+=1)d(c);Le()}},i(u){if(!l){for(let f=0;f<a.length;f+=1)F(r[f]);l=!0}},o(u){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)H(r[f]);l=!1},d(u){u&&(g(e),g(t)),pe(r,u),i=!1,o()}}}function lt(n,e,t){let s,{problemId:l}=e;const i=Ae(()=>X.files.get(l).then(r=>r.attempts));Y(n,i,r=>t(0,s=r));function o(){X.files.update(l,r=>{ie("?attempt="+r.attempts.push(je()))})}const a=r=>ie("?attempt="+(r+1));return n.$$set=r=>{"problemId"in r&&t(3,l=r.problemId)},[s,i,o,l,a]}class at extends K{constructor(e){super(),Z(this,e,lt,st,J,{problemId:3})}}function ot(n){let e,t,s;return{c(){e=C("canvas"),this.h()},l(l){e=D(l,"CANVAS",{class:!0}),q(e).forEach(g),this.h()},h(){_(e,"class","fixed left-0 top-[2em]")},m(l,i){k(l,e,i),n[3](e),t||(s=G(e,"mousedown",n[1]),t=!0)},p:j,i:j,o:j,d(l){l&&g(e),n[3](null),t=!1,s()}}}function it(n,e,t){let{problemId:s}=e,l,i;function o(r){setTimeout(()=>{i.dragStart(r)})}function a(r){oe[r?"unshift":"push"](()=>{l=r,t(0,l),t(2,s)})}return n.$$set=r=>{"problemId"in r&&t(2,s=r.problemId)},n.$$.update=()=>{n.$$.dirty&5&&X.files.get(s).then(r=>{r!=null&&r.question&&(t(0,l.width=r.question.width,l),t(0,l.height=r.question.height,l),l.getContext("2d").putImageData(r.question,0,0))})},[l,o,s,a]}class ut extends K{constructor(e){super(),Z(this,e,it,ot,J,{problemId:2})}}function De(n,e,t){const s=n.slice();return s[8]=e[t],s}function Ee(n){let e,t=n[8]+"",s;return{c(){e=ee("/"),s=ee(t)},l(l){e=te(l,"/"),s=te(l,t)},m(l,i){k(l,e,i),k(l,s,i)},p(l,i){i&2&&t!==(t=l[8]+"")&&de(s,t)},d(l){l&&(g(e),g(s))}}}function ft(n){let e,t,s,l,i,o,a,r,d,u,f,c,m,v,w,M,Q,x,b,I,O;t=new ut({props:{problemId:n[0]}}),l=new Ze({props:{selectedTool:n[3],problemId:n[0],attemptId:n[2]}});let $=re(n[1].params.path.split("/")),A=[];for(let p=0;p<$.length;p+=1)A[p]=Ee(De(n,$,p));return v=new et({props:{problemId:n[0],parentFolder:n[1].params.path.split("/").at(-1)}}),Q=new Ge({props:{selected:n[3]}}),I=new at({props:{problemId:n[0]}}),{c(){e=V(),P(t.$$.fragment),s=V(),P(l.$$.fragment),i=V(),o=C("div"),a=C("div"),r=C("a"),d=ee("üè†"),f=V();for(let p=0;p<A.length;p+=1)A[p].c();c=V(),m=C("div"),P(v.$$.fragment),w=V(),M=C("div"),P(Q.$$.fragment),x=V(),b=C("div"),P(I.$$.fragment),this.h()},l(p){ze("svelte-pyemm1",document.head).forEach(g),e=L(p),B(t.$$.fragment,p),s=L(p),B(l.$$.fragment,p),i=L(p),o=D(p,"DIV",{id:!0,class:!0});var h=q(o);a=D(h,"DIV",{id:!0,class:!0});var E=q(a);r=D(E,"A",{href:!0});var U=q(r);d=te(U,"üè†"),U.forEach(g),f=L(E);for(let me=0;me<A.length;me+=1)A[me].l(E);E.forEach(g),c=L(h),m=D(h,"DIV",{id:!0,class:!0});var le=q(m);B(v.$$.fragment,le),le.forEach(g),w=L(h),M=D(h,"DIV",{id:!0,class:!0});var z=q(M);B(Q.$$.fragment,z),z.forEach(g),x=L(h),b=D(h,"DIV",{id:!0,class:!0});var ae=q(b);B(I.$$.fragment,ae),ae.forEach(g),h.forEach(g),this.h()},h(){document.title="MathMan Draw",_(r,"href",u=ne.join("/",se,n[1].params.path)),_(a,"id","breadcrumbs"),_(a,"class","svelte-1edzgew"),_(m,"id","question-management"),_(m,"class","text-right svelte-1edzgew"),_(M,"id","tools-container"),_(M,"class","svelte-1edzgew"),_(b,"id","attempts-container"),_(b,"class","flex flex-col p-3 gap-3 svelte-1edzgew"),_(o,"id","grid"),_(o,"class","svelte-1edzgew")},m(p,N){k(p,e,N),R(t,p,N),k(p,s,N),R(l,p,N),k(p,i,N),k(p,o,N),T(o,a),T(a,r),T(r,d),T(a,f);for(let h=0;h<A.length;h+=1)A[h]&&A[h].m(a,null);T(o,c),T(o,m),R(v,m,null),T(o,w),T(o,M),R(Q,M,null),T(o,x),T(o,b),R(I,b,null),O=!0},p(p,[N]){const h={};N&1&&(h.problemId=p[0]),t.$set(h);const E={};if(N&1&&(E.problemId=p[0]),N&4&&(E.attemptId=p[2]),l.$set(E),(!O||N&2&&u!==(u=ne.join("/",se,p[1].params.path)))&&_(r,"href",u),N&2){$=re(p[1].params.path.split("/"));let z;for(z=0;z<$.length;z+=1){const ae=De(p,$,z);A[z]?A[z].p(ae,N):(A[z]=Ee(ae),A[z].c(),A[z].m(a,null))}for(;z<A.length;z+=1)A[z].d(1);A.length=$.length}const U={};N&1&&(U.problemId=p[0]),N&2&&(U.parentFolder=p[1].params.path.split("/").at(-1)),v.$set(U);const le={};N&1&&(le.problemId=p[0]),I.$set(le)},i(p){O||(F(t.$$.fragment,p),F(l.$$.fragment,p),F(v.$$.fragment,p),F(Q.$$.fragment,p),F(I.$$.fragment,p),O=!0)},o(p){H(t.$$.fragment,p),H(l.$$.fragment,p),H(v.$$.fragment,p),H(Q.$$.fragment,p),H(I.$$.fragment,p),O=!1},d(p){p&&(g(e),g(s),g(i),g(o)),W(t,p),W(l,p),pe(A,p),W(v),W(Q),W(I)}}}function ct(n,e,t){let s,l,i;Y(n,fe,f=>t(1,l=f));const o=_e(S.None),a=_e(!1);Te("eraserEnabled",a);const r=we(fe,f=>Number.parseInt(f.params.problemId));Y(n,r,f=>t(0,s=f));const d=we(fe,f=>Number.parseInt(f.url.searchParams.get("attempt")??"1")-1);Y(n,d,f=>t(2,i=f));function u(f){if(f){const c=f.route.join("/");"/"+l.params.path!==c&&ie(ne.join("/",se,c,l.params.problemId))}else ie(ne.join("/",se,l.params.path))}return n.$$.update=()=>{n.$$.dirty&1&&typeof window<"u"&&X.files.get(s).then(u)},[s,l,i,o,r,d]}class vt extends K{constructor(e){super(),Z(this,e,ct,ft,J,{})}}export{vt as component,wt as universal};
